---
import { css } from "styled-system/css";
import { Divider, Flex, HStack, Stack } from "styled-system/jsx";
import { circle, visuallyHidden } from "styled-system/patterns";

import ojisan from "~/assets/images/ojisan.png";
import { translator } from "~/lib/i18n";

import Img from "./Img.astro";
import { Link } from "./link";
import { MobileNavbar } from "./mobile-navbar";
import { ThemeSelect } from "./theme-select";

const linkProps = {
  textStyle: "xl",
  variant: "navbar",
} as const;

const t = translator(Astro.currentLocale);
---

<nav
  class={css({
    position: "sticky",
    borderBottomWidth: "medium",
  })}
>
  <HStack
    gap="2"
    minHeight="3rem"
    alignItems="stretch"
    maxWidth="6xl"
    px={{ base: "0", md: "8" }}
    mx="auto"
    class="navbar-container-inner"
  >
    <HStack alignItems="stretch" flexGrow="1" class="navbar-links">
      <HStack
        alignItems="stretch"
        flexGrow="1"
        display={{ base: "none", md: "flex" }}
      >
        <HStack alignItems="stretch" flexGrow="1">
          <Link {...linkProps} href="/no-alt-win-menu">No Alt Win Menu</Link>
        </HStack>
        <HStack alignItems="stretch">
          <Link {...linkProps} href="/blog/" textStyle="md"> Blog </Link>
          <Link {...linkProps} href="/about" textStyle="md">
            <span class={visuallyHidden()}>About</span>
            <Img
              src={ojisan}
              alt={t({
                ja: "Noriapiのアイコン",
                en: "Noriapi's icon",
              })}
              width="30"
              height="30"
              class={circle()}
              priority
            />
          </Link>
        </HStack>
      </HStack>

      <Flex alignItems="stretch" display={{ base: "flex", md: "none" }}>
        <MobileNavbar client:load>
          <Stack width="100%">
            <Link {...linkProps} href="/no-alt-win-menu">No Alt Win Menu</Link>

            <Divider orientation="horizontal" />

            <Link {...linkProps} href="/blog/" textStyle="md">Blog</Link>
            <Link {...linkProps} href="/about" textStyle="md">About</Link>
          </Stack>
        </MobileNavbar>
      </Flex>
    </HStack>

    <HStack alignItems="stretch" gap="3" class="navbar-controls">
      <Divider orientation="vertical" h="6" alignSelf="center" />
      <ThemeSelect client:load lang={Astro.currentLocale} />
    </HStack>
  </HStack>
</nav>
